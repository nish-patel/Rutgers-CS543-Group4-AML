<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Graph Visualization</title>

    <!-- Include neovis.js library -->
    <script src="https://unpkg.com/neovis.js@2.0.2"></script>
</head>
<body>

    <!-- Container for the graph visualization -->
    <div id="viz"></div>

    <script>
        // Function to extract query parameters from the URL
        function getQueryParameter(name) {
            var urlParams = new URLSearchParams(window.location.search);
            return urlParams.get(name);
        }

        // Retrieve the encoded query from localStorage
        var encodedQuery = localStorage.getItem('encodedQuery');

        // Decode the query if it exists
        var cypherQuery = encodedQuery ? decodeURIComponent(encodedQuery) : '';


        // Create a new Neovis instance with the extracted cypherQuery
        var config = {
            container_id: "viz",
            server_url: "bolt://localhost:7687",
            server_user: "neo4j",
            server_password: "neo4jneo4j",
            labels: {
                "root": {
                    "caption": "accountID",
                },
                "connected": {
                    "caption": "accountID",
                }
            },
            relationships: {
                "CONNECTED_TO": {
                    "caption": false,
                }
            },
            initial_cypher: cypherQuery,
        };

        var viz = new NeoVis.default(config);

        // Render the graph
        viz.render();
    </script>

</body>
</html>
