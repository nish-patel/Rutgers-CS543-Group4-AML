<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Graph Visualization</title>
    <style type="text/css">
        html, body {
            font: 16pt arial;
            height: 99%;
            width: 99%;
        }

        #viz {
            width: 99%;
            height: 99%;
            border: 1px solid lightgray;
        }

    </style>
</head>
<body>
    <!-- Include neovis.js library -->
    <script src="https://unpkg.com/neovis.js"></script>

    <!-- Container for the graph visualization -->
    <div id="viz"></div>

    <script>
        // Function to extract query parameters from the URL
        function getQueryParameter(name) {
            var urlParams = new URLSearchParams(window.location.search);
            return urlParams.get(name);
        }

        // Retrieve the encoded query from localStorage
        var encodedQuery = localStorage.getItem('encodedQuery');

        // Decode the query if it exists
        var cypherQuery = encodedQuery ? decodeURIComponent(encodedQuery) : '';

        console.log(cypherQuery)

        //Create a new Neovis instance with the extracted cypherQuery
        const config = {
            containerId: "viz",
            neo4j: {
                serverUrl: "bolt://localhost:7687",
                serverUser: "neo4j",
                serverPassword: "cs543group4",
            },
            labels: {
                root: {
                    label: "accountID",
                },
                connected: {
                    label: "accountID",
                }
            },
            relationships: {
                rels: {
                    label: "false"
                }
            },
            initialCypher: cypherQuery
        };

        neoViz = new NeoVis.default(config);
        neoViz.render();
        
    </script>

</body>
</html>
